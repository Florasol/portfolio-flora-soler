{"ast":null,"code":"import React,{useState,useEffect}from\"react\";// Import components\nimport Banner from\"../../components/Banner/Banner\";import MessageDisplay from\"../../components/MessageDisplay/MessageDisplay\";// Import image\nimport contactBanner from\"../../assets/contactbanner.jpg\";// Import style\nimport\"./vosimpressions.scss\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Vosimpressions(){const[formData,setFormData]=useState({name:\"\",message:\"\"});const[successMessage,setSuccessMessage]=useState(\"\");const[submittedMessages,setSubmittedMessages]=useState([]);// Stocke tous les messages soumis\n// Vérifier si localStorage est disponible\nconst isLocalStorageAvailable=()=>{try{const testKey=\"__test__\";localStorage.setItem(testKey,testKey);localStorage.removeItem(testKey);return true;}catch(error){console.error(\"localStorage non disponible :\",error);return false;}};// Charger les messages stockés depuis le localStorage au montage\nuseEffect(()=>{if(isLocalStorageAvailable()){const storedMessages=JSON.parse(localStorage.getItem(\"submittedMessages\"))||[];console.log(\"Messages chargés depuis localStorage :\",storedMessages);setSubmittedMessages(storedMessages);}},[]);// Ajoutez un tableau de dépendances vide pour ne le faire qu'une seule fois au montage\n// Sauvegarder les messages dans le localStorage à chaque mise à jour\nuseEffect(()=>{if(isLocalStorageAvailable()){if(submittedMessages.length>0){// Ajoutez une vérification pour ne pas sauvegarder une liste vide\nlocalStorage.setItem(\"submittedMessages\",JSON.stringify(submittedMessages));console.log(\"Messages sauvegardés dans localStorage :\",submittedMessages);}}},[submittedMessages]);// Cette dépendance assure que l'état sera sauvegardé à chaque modification\nfunction handleChange(event){const{name,value}=event.target;setFormData({...formData,[name]:value});}function handleSubmit(event){event.preventDefault();// Validation : vérifier que tous les champs sont remplis\nif(formData.name&&formData.message){const newMessage={...formData};setSubmittedMessages([...submittedMessages,newMessage]);// Ajoute le nouveau message à la liste\nsetSuccessMessage(\"Votre message a bien été envoyé !\");setFormData({name:\"\",message:\"\"});// Réinitialise les champs du formulaire\n}else{setSuccessMessage(\"Veuillez remplir tous les champs.\");}}function handleDelete(index){const updatedMessages=submittedMessages.filter((_,i)=>i!==index);setSubmittedMessages(updatedMessages);// Met à jour la liste des messages\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Banner,{picture:contactBanner,title:\"\",className:\"banner\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Laissez un avis!\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"contact-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Entrez votre nom\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"message\",name:\"message\",value:formData.message,onChange:handleChange,placeholder:\"\\xC9crivez votre message ici\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Envoyer\"})]}),successMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:successMessage})]}),submittedMessages.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"message-display-container\",children:submittedMessages.map((msg,index)=>/*#__PURE__*/_jsx(MessageDisplay,{name:msg.name,message:msg.message,onDelete:()=>handleDelete(index)// Passe la fonction handleDelete\n},index))})]});}export default Vosimpressions;","map":{"version":3,"names":["React","useState","useEffect","Banner","MessageDisplay","contactBanner","jsx","_jsx","jsxs","_jsxs","Vosimpressions","formData","setFormData","name","message","successMessage","setSuccessMessage","submittedMessages","setSubmittedMessages","isLocalStorageAvailable","testKey","localStorage","setItem","removeItem","error","console","storedMessages","JSON","parse","getItem","log","length","stringify","handleChange","event","value","target","handleSubmit","preventDefault","newMessage","handleDelete","index","updatedMessages","filter","_","i","children","picture","title","className","onSubmit","htmlFor","type","id","onChange","placeholder","required","map","msg","onDelete"],"sources":["/Users/florasoler/Portfolio 3/frontend/src/pages/Vosimpressions/Vosimpressions.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n// Import components\nimport Banner from \"../../components/Banner/Banner\";\nimport MessageDisplay from \"../../components/MessageDisplay/MessageDisplay\"; \n// Import image\nimport contactBanner from \"../../assets/contactbanner.jpg\";\n\n// Import style\nimport \"./vosimpressions.scss\";\n\nfunction Vosimpressions() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    message: \"\",\n  });\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [submittedMessages, setSubmittedMessages] = useState([]); // Stocke tous les messages soumis\n\n  // Vérifier si localStorage est disponible\n  const isLocalStorageAvailable = () => {\n    try {\n      const testKey = \"__test__\";\n      localStorage.setItem(testKey, testKey);\n      localStorage.removeItem(testKey);\n      return true;\n    } catch (error) {\n      console.error(\"localStorage non disponible :\", error);\n      return false;\n    }\n  };\n\n  // Charger les messages stockés depuis le localStorage au montage\n  useEffect(() => {\n    if (isLocalStorageAvailable()) {\n      const storedMessages = JSON.parse(localStorage.getItem(\"submittedMessages\")) || [];\n      console.log(\"Messages chargés depuis localStorage :\", storedMessages);\n      setSubmittedMessages(storedMessages);\n    }\n  }, []);  // Ajoutez un tableau de dépendances vide pour ne le faire qu'une seule fois au montage\n\n  // Sauvegarder les messages dans le localStorage à chaque mise à jour\n  useEffect(() => {\n    if (isLocalStorageAvailable()) {\n      if (submittedMessages.length > 0) {  // Ajoutez une vérification pour ne pas sauvegarder une liste vide\n        localStorage.setItem(\"submittedMessages\", JSON.stringify(submittedMessages));\n        console.log(\"Messages sauvegardés dans localStorage :\", submittedMessages);\n      }\n    }\n  }, [submittedMessages]); // Cette dépendance assure que l'état sera sauvegardé à chaque modification\n\n  function handleChange(event) {\n    const { name, value } = event.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Validation : vérifier que tous les champs sont remplis\n    if (formData.name && formData.message) {\n      const newMessage = { ...formData };\n      setSubmittedMessages([...submittedMessages, newMessage]); // Ajoute le nouveau message à la liste\n      setSuccessMessage(\"Votre message a bien été envoyé !\");\n      setFormData({ name: \"\", message: \"\" }); // Réinitialise les champs du formulaire\n    } else {\n      setSuccessMessage(\"Veuillez remplir tous les champs.\");\n    }\n  }\n\n  function handleDelete(index) {\n    const updatedMessages = submittedMessages.filter((_, i) => i !== index);\n    setSubmittedMessages(updatedMessages); // Met à jour la liste des messages\n  }\n\n  return (\n    <div>\n      {/* Bannière */}\n      <Banner picture={contactBanner} title=\"\" className=\"banner\" />\n\n      {/* Formulaire de contact */}\n      <div className=\"contact-container\">\n        <h2>Laissez un avis!</h2>\n        <form className=\"contact-form\" onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"name\">Nom</label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              placeholder=\"Entrez votre nom\"\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"message\">Message</label>\n            <textarea\n              id=\"message\"\n              name=\"message\"\n              value={formData.message}\n              onChange={handleChange}\n              placeholder=\"Écrivez votre message ici\"\n              required\n            />\n          </div>\n\n          <button type=\"submit\" className=\"submit-button\">\n            Envoyer\n          </button>\n        </form>\n\n        {successMessage && <p className=\"success-message\">{successMessage}</p>}\n      </div>\n\n      {/* Affichage des messages envoyés */}\n            {submittedMessages.length > 0 && (\n        <div className=\"message-display-container\">\n          {submittedMessages.map((msg, index) => (\n            <MessageDisplay\n              key={index}\n              name={msg.name}\n              message={msg.message}\n              onDelete={() => handleDelete(index)}  // Passe la fonction handleDelete\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Vosimpressions;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}